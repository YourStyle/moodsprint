# Геймификация

Система мотивации через игровые механики.

## Система XP

### Источники XP

| Действие | XP |
|----------|-----|
| Выполнение подзадачи | 10 |
| Выполнение задачи | 50 |
| Фокус-сессия (базовый) | 25 |
| Фокус 20+ мин | +5 |
| Фокус 30+ мин | +10 |
| Фокус 45+ мин | +15 |
| Проверка настроения | 5 |
| Ежедневный бонус | 10-45 |
| Все ежедневные цели | 30 |

### Формула уровня

```
Уровень = floor(sqrt(XP / 100)) + 1
```

Примеры:
- 0-99 XP → Уровень 1
- 100-399 XP → Уровень 2
- 400-899 XP → Уровень 3
- ...

---

## Уровни

15 именованных уровней + бесконечные "Трансцендент":

| Уровень | Название | Требуется XP |
|---------|----------|--------------|
| 1 | Новичок | 0 |
| 2 | Начинающий | 100 |
| 3 | Ученик | 400 |
| 4 | Практик | 900 |
| 5 | Умелец | 1,600 |
| 6 | Специалист | 2,500 |
| 7 | Знаток | 3,600 |
| 8 | Эксперт | 4,900 |
| 9 | Мастер | 6,400 |
| 10 | Гуру | 8,100 |
| 11 | Виртуоз | 10,000 |
| 12 | Легенда | 12,100 |
| 13 | Чемпион | 14,400 |
| 14 | Грандмастер | 16,900 |
| 15 | Просветлённый | 19,600 |
| 16+ | Трансцендент I, II... | 22,500+ |

---

## Серия (стрик)

### Как работает
- Увеличивается при любой активности за день
- Сбрасывается если день пропущен
- Записывается рекорд (longest_streak)

### Активность для серии
- Выполнение задачи/подзадачи
- Завершение фокус-сессии
- Проверка настроения

### Бонусы за серию
- Увеличенный ежедневный бонус (+5 XP за день серии)
- Достижения за серии
- Визуальный бейдж на главной

---

## Ежедневный бонус

### Формула
```
XP = 10 + min(streak_days, 7) × 5
```

| Серия | Бонус XP |
|-------|----------|
| 0 дней | 10 |
| 1 день | 15 |
| 2 дня | 20 |
| 3 дня | 25 |
| 4 дня | 30 |
| 5 дней | 35 |
| 6 дней | 40 |
| 7+ дней | 45 (максимум) |

### Ограничения
- Один раз в день
- Автоматическое предложение при входе
- Модальное окно с анимацией

---

## Ежедневные цели

### Три цели

1. **Время фокуса**
   - Цель: 60 минут
   - Считается суммарно за день

2. **Подзадачи**
   - Цель: 5 выполненных подзадач
   - Любые подзадачи

3. **Проверка настроения**
   - Цель: 1 проверка
   - Достаточно одной за день

### Бонус за все цели
- **30 XP** при выполнении всех трёх
- Достижение "Идеальный день"

---

## Достижения

### Категории

#### Начало пути
| Код | Название | XP | Условие |
|-----|----------|-----|---------|
| first_step | Первый шаг | 10 | Первая подзадача |
| task_completed | Задача выполнена | 50 | Первая задача |
| know_yourself | Познай себя | 15 | Первая проверка настроения |
| focused | Сфокусирован | 30 | Первая фокус-сессия |

#### Серии
| Код | Название | XP | Условие |
|-----|----------|-----|---------|
| streak_3 | 3 дня подряд | 40 | Серия 3 дня |
| streak_7 | Неделя прогресса | 100 | Серия 7 дней |
| streak_14 | Две недели | 200 | Серия 14 дней |
| streak_30 | Чемпион месяца | 500 | Серия 30 дней |

#### Настроение
| Код | Название | XP | Условие |
|-----|----------|-----|---------|
| self_knowledge | Самопознание | 30 | 5 проверок настроения |
| mood_master | Мастер настроения | 75 | 20 проверок |
| honest_day | Честный день | 50 | Задача при низкой энергии |
| fatigue_hero | Герой усталости | 100 | 5 задач при низкой энергии |

#### Фокус
| Код | Название | XP | Условие |
|-----|----------|-----|---------|
| learning_focus | Учусь фокусу | 50 | 5 фокус-сессий |
| focus_sprinter | Спринтер фокуса | 150 | 25 сессий |
| hour_of_power | Час силы | 75 | 60 мин фокуса за день |
| deep_focus | Глубокий фокус | 60 | 45+ мин сессия |

#### Задачи
| Код | Название | XP | Условие |
|-----|----------|-----|---------|
| progress | Прогресс идёт | 50 | 5 задач |
| task_master | Мастер задач | 150 | 25 задач |
| century_club | Клуб сотни | 400 | 100 задач |
| step_by_step | Шаг за шагом | 100 | 50 подзадач |

#### Уровни
| Код | Название | XP | Условие |
|-----|----------|-----|---------|
| new_level | Новый уровень! | 50 | Уровень 3 |
| rising_star | Восходящая звезда | 100 | Уровень 5 |
| productivity_pro | Профи продуктивности | 250 | Уровень 10 |

#### Особые (скрытые)
| Код | Название | XP | Условие |
|-----|----------|-----|---------|
| perfect_day | Идеальный день | 50 | Все ежедневные цели |
| weekend_warrior | Воин выходных | 30 | Задача в выходной |
| early_bird | Ранняя пташка | 30 | Задача до 9:00 |
| night_owl | Ночная сова | 30 | Задача после 22:00 |

### Прогресс достижений

Некоторые достижения имеют счётчик прогресса:
- Показывается прогресс-бар
- Отображается текущее/требуемое значение
- Обновляется при каждом действии

---

## Лидерборд

### Типы
- **Недельный** — XP за последнюю неделю
- **Всё время** — общий XP

### Отображение
- Место в рейтинге
- Имя пользователя
- XP
- Уровень
- Серия
