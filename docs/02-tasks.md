# Управление задачами

## Список задач (`/tasks`)

Полный список всех задач пользователя с фильтрацией.

### Фильтры

Доступные фильтры по статусу:
- **Все** — все задачи
- **Ожидают** — задачи со статусом `pending`
- **В работе** — задачи со статусом `in_progress`
- **Выполнено** — задачи со статусом `completed`

### Карточка задачи

Каждая задача отображается в виде карточки:
- **Название** — заголовок задачи
- **Описание** — краткое описание (если есть)
- **Приоритет** — бейдж (Низкий/Средний/Высокий)
- **Статус** — бейдж (Ожидает/В работе/Выполнено)
- **Прогресс** — процент выполнения подзадач
- **Прогресс-бар** — визуальный индикатор

При нажатии на карточку открывается страница задачи.

### Создание задачи

Кнопка "Создать задачу" открывает модальное окно:
- **Название** (обязательно, до 500 символов)
- **Описание** (опционально)
- **Приоритет**: низкий, средний (по умолчанию), высокий
- **Дата выполнения** (по умолчанию — сегодня)

После создания задача автоматически классифицируется AI:
- Определяется тип задачи
- Определяется оптимальное время выполнения

---

## Страница задачи (`/tasks/[id]`)

Детальный просмотр и управление конкретной задачей.

### Информация о задаче

- Название и описание
- Бейджи приоритета и статуса
- Общий прогресс выполнения
- Прогресс-бар

### Действия с задачей

Для незавершённых задач доступны кнопки:
- **Начать фокус** — запускает фокус-сессию
- **Завершить** — отмечает задачу как выполненную

### AI-разбиение

Кнопка **"Разбить на шаги с ИИ"**:
- Использует OpenAI API для интеллектуального разбиения
- Учитывает текущее настроение пользователя
- Генерирует 5-8 конкретных подзадач
- Показывает стратегию и сообщение

Подробнее в [06-ai-features.md](./06-ai-features.md)

### Подзадачи

Список подзадач задачи:
- Чекбокс для отметки выполнения
- Название подзадачи
- Кнопка "Начать фокус" для каждой подзадачи
- Возможность перетаскивания для изменения порядка

#### Добавление подзадачи

Кнопка "Добавить подзадачу" открывает модальное окно:
- Название подзадачи
- Оценка времени (опционально, 1-120 минут)

### Удаление задачи

Кнопка удаления с подтверждением:
- Модальное окно с предупреждением
- Удаляются все подзадачи
- Действие необратимо

---

## Умная сортировка

Задачи сортируются по умному алгоритму:

| Фактор | Очки |
|--------|------|
| Высокий приоритет | +100 |
| Средний приоритет | +50 |
| Низкий приоритет | +0 |
| Совпадение времени | +30 |
| Любимый тип задачи | +20 |
| За каждый перенос | +15 |
| Просроченная задача | +50 |

Вторичная сортировка — по дате выполнения.

---

## Статусы задач

### Задача
- `pending` — ожидает выполнения
- `in_progress` — в работе
- `completed` — выполнена

### Подзадача
- `pending` — ожидает
- `in_progress` — в работе
- `completed` — выполнена
- `skipped` — пропущена

---

## Автоматический перенос

Просроченные задачи автоматически переносятся на сегодня:
- Запускается ежедневно в 00:05
- Увеличивается счётчик переносов
- После 2+ переносов повышается приоритет
- Пользователь получает уведомление

Подробнее в [08-telegram-bot.md](./08-telegram-bot.md)
