# Фокус-таймер

Страница `/focus` — таймер для концентрированной работы в стиле Pomodoro.

## Выбор длительности

Доступные пресеты времени:
- **15 минут** — короткий спринт
- **25 минут** — классический Pomodoro
- **45 минут** — расширенная сессия
- **60 минут** — глубокий фокус

## Запуск сессии

Два варианта запуска:

### С задачей
1. Нажать "Начать с задачей"
2. В модальном окне выбрать подзадачу из списка
3. Таймер запускается с привязкой к подзадаче

### Без задачи
1. Нажать "Начать без задачи"
2. Таймер запускается без привязки
3. XP всё равно начисляется

## Активная сессия

Во время фокус-сессии отображается:
- **Обратный отсчёт** — оставшееся время
- **Прогресс** — визуальный индикатор
- **Задача/подзадача** — к чему привязана сессия

### Управление сессией

Доступные действия:
- **Завершить** — досрочно завершить с начислением XP
- **Отменить** — прервать без XP
- **Пауза/Продолжить** — временная остановка

### Завершение подзадачи

При завершении сессии с привязанной подзадачей:
- Предложение отметить подзадачу как выполненную
- Автоматическое обновление прогресса задачи

## Начисление XP

### Базовый XP
- **25 XP** за завершённую сессию

### Бонусы за длительность
| Длительность | Бонус |
|--------------|-------|
| 45+ минут | +15 XP |
| 30+ минут | +10 XP |
| 20+ минут | +5 XP |

### Итого
- 15 мин: 25 XP
- 25 мин: 30 XP
- 45 мин: 40 XP
- 60 мин: 40 XP

## История сессий

Под таймером отображаются последние 5 сессий:
- Дата и время
- Длительность
- Статус (завершена/отменена)
- Привязанная задача (если была)

## Статусы сессии

- `active` — сессия идёт
- `paused` — на паузе
- `completed` — успешно завершена
- `cancelled` — отменена

## Интеграция

### С задачами
- Кнопка "Начать фокус" на карточке задачи
- Кнопка "Начать фокус" у каждой подзадачи
- Автостатус `in_progress` при старте

### С геймификацией
- XP за завершение
- Прогресс ежедневной цели "Время фокуса"
- Достижения за фокус-сессии

### С ботом
- Уведомление о завершении сессии
- Индикатор активной сессии в навигации
